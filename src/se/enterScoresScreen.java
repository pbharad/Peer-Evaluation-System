/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */


/* 
Code Submission - 09-Dec-2017
Team No : 13

1. Yash Dharmendra Shah - 50245455
2. Dilip Reddy Gaddam - 50248867
3. Pratibha Arjun Barsale - 50247005
4. Bharadwaj Parthasarathy - 50246591
5. Mayur M Popade - 50246313 

*/

package se;

import com.sun.corba.se.impl.protocol.giopmsgheaders.Message;
import java.awt.Component;
import java.util.Random;
import java.util.List;
import java.util.ArrayList;
import javax.swing.*;
import javax.swing.text.JTextComponent;

/**
 *
 * @author shahy
 */
public class enterScoresScreen extends javax.swing.JFrame {
    
    /**
     * Creates new form enterScoresScreen
     * @param sEntered
     * @param noOfMem
     */
    /*public enterScoresScreen(int noOfMem, boolean scoresEntered) {
        initComponents();
    }*/
    
    public enterScoresScreen()
    {
        //Default constructor
    }
    
    
    int noOfMem;
    JLabel nameLabels[] = new JLabel[7];
    JComboBox scoreComboBoxes[] = new JComboBox[21];
    
    public enterScoresScreen(boolean sEntered, int noOfMem) {
        
        /* The method is called to store the scores entered by each student for the team members */
        
        initComponents();
        this.noOfMem = noOfMem;
        int noOfMem2 = noOfMem*3;
        Random rand = new Random();
        int rNum;
        int i = 1, j = 1;
        Component[] components;
        components = this.getContentPane().getComponents();
        for (Component component : components) {
            if (component instanceof JComboBox) {
                JComboBox specificObject = (JComboBox) component;
                if(i > noOfMem2) {
                    specificObject.setVisible(false);
                }
                else {
                    scoreComboBoxes[i-1] = specificObject;
                    if (sEntered) {
                        rNum = rand.nextInt(6);
                        specificObject.setSelectedItem(Integer.toString(rNum));
                    }
                }
                i++;
            }
            
            if (component instanceof JLabel) {
                JLabel specificObject = (JLabel) component;
                if(j > noOfMem && j <= 7) {                    
                    specificObject.setVisible(false);
                }
                else if(j <= 7) {
                    nameLabels[j-1] = specificObject;
                }
                j++;
            }
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        goBackButton = new javax.swing.JButton();
        submitScoreButton = new javax.swing.JButton();
        ComboBox1 = new javax.swing.JComboBox<>();
        memNameLabel1 = new javax.swing.JLabel();
        ComboBox2 = new javax.swing.JComboBox<>();
        ComboBox3 = new javax.swing.JComboBox<>();
        ComboBox4 = new javax.swing.JComboBox<>();
        ComboBox5 = new javax.swing.JComboBox<>();
        ComboBox6 = new javax.swing.JComboBox<>();
        ComboBox7 = new javax.swing.JComboBox<>();
        ComboBox8 = new javax.swing.JComboBox<>();
        ComboBox9 = new javax.swing.JComboBox<>();
        ComboBox10 = new javax.swing.JComboBox<>();
        ComboBox11 = new javax.swing.JComboBox<>();
        ComboBox12 = new javax.swing.JComboBox<>();
        ComboBox13 = new javax.swing.JComboBox<>();
        ComboBox14 = new javax.swing.JComboBox<>();
        ComboBox15 = new javax.swing.JComboBox<>();
        ComboBox16 = new javax.swing.JComboBox<>();
        ComboBox17 = new javax.swing.JComboBox<>();
        ComboBox18 = new javax.swing.JComboBox<>();
        ComboBox19 = new javax.swing.JComboBox<>();
        ComboBox20 = new javax.swing.JComboBox<>();
        ComboBox21 = new javax.swing.JComboBox<>();
        memNameLabel2 = new javax.swing.JLabel();
        memNameLabel3 = new javax.swing.JLabel();
        memNameLabel4 = new javax.swing.JLabel();
        memNameLabel5 = new javax.swing.JLabel();
        memNameLabel6 = new javax.swing.JLabel();
        memNameLabel7 = new javax.swing.JLabel();
        memNameLabel8 = new javax.swing.JLabel();
        memNameLabel9 = new javax.swing.JLabel();
        memNameLabel10 = new javax.swing.JLabel();
        memNameLabel11 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setPreferredSize(new java.awt.Dimension(800, 600));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        goBackButton.setText("Back");
        goBackButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        goBackButton.setPreferredSize(new java.awt.Dimension(115, 25));
        goBackButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                goBackButtonActionPerformed(evt);
            }
        });
        getContentPane().add(goBackButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 497, 156, -1));

        submitScoreButton.setText("Submit Scores");
        submitScoreButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        submitScoreButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                submitScoreButtonActionPerformed(evt);
            }
        });
        getContentPane().add(submitScoreButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(444, 497, 156, -1));

        ComboBox1.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox1.setActionCommand("");
        ComboBox1.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox1, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 150, -1, -1));

        memNameLabel1.setText("Student 1");
        memNameLabel1.setOpaque(true);
        getContentPane().add(memNameLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 150, -1, -1));

        ComboBox2.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox2.setActionCommand("");
        ComboBox2.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox2, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 150, -1, -1));

        ComboBox3.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox3.setActionCommand("");
        ComboBox3.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox3, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 150, -1, -1));

        ComboBox4.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox4.setActionCommand("");
        ComboBox4.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox4, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 190, -1, -1));

        ComboBox5.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox5.setActionCommand("");
        ComboBox5.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox5, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 190, -1, -1));

        ComboBox6.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox6.setActionCommand("");
        ComboBox6.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox6, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 190, -1, -1));

        ComboBox7.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox7.setActionCommand("");
        ComboBox7.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox7, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 230, -1, -1));

        ComboBox8.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox8.setActionCommand("");
        ComboBox8.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox8, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 230, -1, -1));

        ComboBox9.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox9.setActionCommand("");
        ComboBox9.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox9, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 230, -1, -1));

        ComboBox10.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox10.setActionCommand("");
        ComboBox10.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox10, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 270, -1, -1));

        ComboBox11.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox11.setActionCommand("");
        ComboBox11.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox11, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 270, -1, -1));

        ComboBox12.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox12.setActionCommand("");
        ComboBox12.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox12, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 270, -1, -1));

        ComboBox13.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox13.setActionCommand("");
        ComboBox13.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox13, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 310, -1, -1));

        ComboBox14.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox14.setActionCommand("");
        ComboBox14.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox14, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 310, -1, -1));

        ComboBox15.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox15.setActionCommand("");
        ComboBox15.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox15, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 310, -1, -1));

        ComboBox16.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox16.setActionCommand("");
        ComboBox16.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox16, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 350, -1, -1));

        ComboBox17.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox17.setActionCommand("");
        ComboBox17.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox17, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 350, -1, -1));

        ComboBox18.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox18.setActionCommand("");
        ComboBox18.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox18, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 350, -1, -1));

        ComboBox19.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox19.setActionCommand("");
        ComboBox19.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox19, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 390, -1, -1));

        ComboBox20.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox20.setActionCommand("");
        ComboBox20.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox20, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 390, -1, -1));

        ComboBox21.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "0", "1", "2", "3", "4", "5" }));
        ComboBox21.setActionCommand("");
        ComboBox21.setPreferredSize(new java.awt.Dimension(48, 22));
        getContentPane().add(ComboBox21, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 390, -1, -1));

        memNameLabel2.setText("Student 2");
        memNameLabel2.setOpaque(true);
        getContentPane().add(memNameLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 190, -1, -1));

        memNameLabel3.setText("Student 3");
        memNameLabel3.setOpaque(true);
        getContentPane().add(memNameLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 230, -1, -1));

        memNameLabel4.setText("Student 4");
        memNameLabel4.setOpaque(true);
        getContentPane().add(memNameLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 270, -1, -1));

        memNameLabel5.setText("Student 5");
        memNameLabel5.setOpaque(true);
        getContentPane().add(memNameLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 310, -1, -1));

        memNameLabel6.setText("Student 6");
        memNameLabel6.setOpaque(true);
        getContentPane().add(memNameLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 350, -1, -1));

        memNameLabel7.setText("Student 7");
        memNameLabel7.setOpaque(true);
        getContentPane().add(memNameLabel7, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 390, -1, -1));

        memNameLabel8.setText("Professionalism");
        memNameLabel8.setOpaque(true);
        getContentPane().add(memNameLabel8, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 100, -1, -1));

        memNameLabel9.setText("Meeting Participation");
        memNameLabel9.setOpaque(true);
        getContentPane().add(memNameLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 100, -1, -1));

        memNameLabel10.setText("Name");
        memNameLabel10.setOpaque(true);
        getContentPane().add(memNameLabel10, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 100, -1, -1));

        memNameLabel11.setText("Work Evaluation");
        memNameLabel11.setOpaque(true);
        getContentPane().add(memNameLabel11, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 100, -1, -1));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void submitScoreButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_submitScoreButtonActionPerformed
    
        /* The function is called on clicking on the "Submit" button. It reads the grades given by the 
        student and then calculate the normalized score for each team member
        */
         
          try
        {
            int scores[] = new int[noOfMem*3];
            int totalScore;
            float[] normalizedScore = new float[noOfMem];
            String out = "";
        
            for(int i = 0; i < (noOfMem*3); i++) {
                scores[i] = Integer.parseInt(scoreComboBoxes[i].getSelectedItem().toString()); //read all the values from the GUI and store them in an array
            }
        
            totalScore = calcTotal(scores, noOfMem); //to calculate the total score
            switch(totalScore) { //this switch case is used to check for any abnormal inputs
            case -2:
                out = "Please enter scores between 0-5";
                JOptionPane.showMessageDialog(this, out); //displays an error if the scores is not between proper range
                return;
                
            case -1:
                out = "The total cannot be 0";
                JOptionPane.showMessageDialog(this, out); //displays an error if the total is 0
                return;
            }
        
            normalizedScore = normalize(scores, totalScore, noOfMem);
            for(int i = 0; i < normalizedScore.length; i++) {
                out = out + nameLabels[i].getText() + ": " + String.format("%.2f", normalizedScore[i]) + "\n"; //this is used to create a output string which will be later displayed
            }
        
            JOptionPane.showMessageDialog(this, out); //displays a dialog using the out string for output
        }
        
            catch(Exception e)
        {
             System.out.println(e.getMessage());
        }
        
    }//GEN-LAST:event_submitScoreButtonActionPerformed
     
    
    //Code for nomalizing the scores
    public float[] normalize(int[] scores, int totalScore, int noOfMem) {
    
    /* This method is for normalizing the grades of the students. 
        The scores submitted by the student will be calculated. Upon calculating the total score, the normalized
        grade for each student will be calculated in this method
        */     
        float tempNormalizedScore = 0;
        float[] normalizedScore = new float[noOfMem];
        int j = 0;
        
        for(int i = 0; i < (noOfMem*3); i++) {
            tempNormalizedScore += (float)scores[i]/totalScore;
            if(i%3 == 2) {
                normalizedScore[j] = tempNormalizedScore; //stores the normalized score in an array which is returned at the end of the method
                tempNormalizedScore = 0;
                j++;
            }
        }
              
        return normalizedScore;
    }
    
    //method to calculate the total score
    public int calcTotal (int [] scores, int noOfMem) {
    
        /* This method calculates the total score entered by the student */
        
        int totalScore = 0;
        for(int i = 0; i < (noOfMem*3); i++) {
            if (scores[i] < 0 || scores[i] > 5) {
                return -2; //returns -2 if the scores are out of range
            }
            totalScore +=  scores[i];
        }
        if (totalScore == 0)
            return -1; //returns -1 if the total is 0
        else
            return totalScore; //returns the total score if no errors are found
    }
    
    
    private void goBackButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_goBackButtonActionPerformed
        // TODO add your handling code here:
        dispose();
        new gradingUi().setVisible(true);
    }//GEN-LAST:event_goBackButtonActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(enterScoresScreen.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(enterScoresScreen.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(enterScoresScreen.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(enterScoresScreen.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        /* Create and display the form */
        
        
        
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                //new enterScoresScreen(false,0).setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox<String> ComboBox1;
    private javax.swing.JComboBox<String> ComboBox10;
    private javax.swing.JComboBox<String> ComboBox11;
    private javax.swing.JComboBox<String> ComboBox12;
    private javax.swing.JComboBox<String> ComboBox13;
    private javax.swing.JComboBox<String> ComboBox14;
    private javax.swing.JComboBox<String> ComboBox15;
    private javax.swing.JComboBox<String> ComboBox16;
    private javax.swing.JComboBox<String> ComboBox17;
    private javax.swing.JComboBox<String> ComboBox18;
    private javax.swing.JComboBox<String> ComboBox19;
    private javax.swing.JComboBox<String> ComboBox2;
    private javax.swing.JComboBox<String> ComboBox20;
    private javax.swing.JComboBox<String> ComboBox21;
    private javax.swing.JComboBox<String> ComboBox3;
    private javax.swing.JComboBox<String> ComboBox4;
    private javax.swing.JComboBox<String> ComboBox5;
    private javax.swing.JComboBox<String> ComboBox6;
    private javax.swing.JComboBox<String> ComboBox7;
    private javax.swing.JComboBox<String> ComboBox8;
    private javax.swing.JComboBox<String> ComboBox9;
    private javax.swing.JButton goBackButton;
    private javax.swing.JLabel memNameLabel1;
    private javax.swing.JLabel memNameLabel10;
    private javax.swing.JLabel memNameLabel11;
    private javax.swing.JLabel memNameLabel2;
    private javax.swing.JLabel memNameLabel3;
    private javax.swing.JLabel memNameLabel4;
    private javax.swing.JLabel memNameLabel5;
    private javax.swing.JLabel memNameLabel6;
    private javax.swing.JLabel memNameLabel7;
    private javax.swing.JLabel memNameLabel8;
    private javax.swing.JLabel memNameLabel9;
    private javax.swing.JButton submitScoreButton;
    // End of variables declaration//GEN-END:variables
}
